#!/bin/sh
# Labwc autostart for HydraVision kiosk

LOG="${HOME}/.cache/hydravision-kiosk.log"
mkdir -p "$(dirname "$LOG")"

xset s off
xset -dpms
xset s noblank

CHROME_BIN="$(command -v chromium-browser || command -v chromium || true)"
if [ -z "$CHROME_BIN" ]; then
  echo "Chromium not found in PATH." >>"$LOG"
  exit 1
fi

PROFILE_DIR="${HOME}/.config/chromium-kiosk"
mkdir -p "$PROFILE_DIR"

"$CHROME_BIN" --kiosk --start-fullscreen --disable-infobars --disable-session-crashed-bubble \
  --disable-features=TranslateUI,PasswordManagerOnboarding,PasswordManager,AutofillServerCommunication \
  --disable-sync --no-first-run --no-default-browser-check --disable-extensions \
  --noerrdialogs --autoplay-policy=no-user-gesture-required \
  --password-store=basic --use-mock-keychain --user-data-dir="$PROFILE_DIR" \
  --allow-file-access-from-files \
  file:///home/admin/Dev/cross_shore_dev/apps/controller/mvp_ui.html >>"$LOG" 2>&1

